<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MFM SignUp Page</title>
    <link rel="stylesheet" href="signup.css">
    <link rel="shortcut icon" type="x-icon" href="icon1.png">
</head>
<body>
    <div class="box">
        <div class="form">
            <h2>Sign Up</h2>
            
            <!-- Put ALL inputs inside the form -->
            <form action="login.html" method="get">
                <div class="inputBox">
                    <input type="text" required="required" name="firstName" autocomplete="given-name">
                    <span>First Name</span>
                    <i></i>
                </div>

                <div class="inputBox">
                    <input type="text" required="required" name="lastName" autocomplete="family-name">
                    <span>Last Name</span>
                    <i></i>
                </div>

                <div class="inputBox">
                    <input type="text" required="required" name="username" autocomplete="username">
                    <span>Username</span>
                    <i></i>
                </div>

                <div class="inputBox">
                    <input type="email" required="required" name="email" autocomplete="email">
                    <span>Email Address</span>
                    <i></i>
                </div>

                <div class="inputBox">
                    <input type="text" required="required" name="houseFellowship" autocomplete="organization">
                    <span>House Fellowship</span>
                    <i></i>
                </div>

                <div class="inputBox">
                    <input type="tel" required="required" name="phone" autocomplete="tel">
                    <span>Phone Number</span>
                    <i></i>
                </div>

                <div class="inputBox">
                    <input type="password" required="required" name="password" autocomplete="new-password">
                    <span>New Password</span>
                    <i></i>
                </div>

                <div class="inputBox">
                    <input type="password" required="required" name="confirmPassword" autocomplete="new-password">
                    <span>Confirm Password</span>
                    <i></i>
                </div>

                <br><br>

                <input type="checkbox"> 
                <p>I want to receive emails about MFM and related programs and services, and also counselling from MFM.</p>

                <br>

                <p1>By creating an account, you agree to our terms and have read and acknowledged the Global Privacy Statements.</p1>

                <!-- Submit button inside form -->
                <input type="submit" value="Submit">
            </form>

        </div>
    </div>

    <script>
        document.querySelector('form').addEventListener('submit', function(e) {
            e.preventDefault();
            const firstName = document.querySelector('input[name="firstName"]').value;
            const lastName = document.querySelector('input[name="lastName"]').value;
            const username = document.querySelector('input[name="username"]').value;
            const email = document.querySelector('input[name="email"]').value;
            const houseFellowship = document.querySelector('input[name="houseFellowship"]').value;
            const phone = document.querySelector('input[name="phone"]').value;
            const password = document.querySelector('input[name="password"]').value;
            const confirmPassword = document.querySelector('input[name="confirmPassword"]').value;

            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }

            const user = {
                firstName,
                lastName,
                username,
                email,
                houseFellowship,
                phone,
                password
            };

            // Generate verification code
            const verificationCode = Math.random().toString(36).substr(2, 6).toUpperCase();

            // Store pending user and code
            localStorage.setItem('pendingUser', JSON.stringify(user));
            localStorage.setItem('verificationCode', verificationCode);

            // Simulate email sending
            alert(`Verification email sent to ${email}. Your verification code is: ${verificationCode}`);

            // Prompt for code
            const enteredCode = prompt('Enter the verification code sent to your email:');
            if (enteredCode === verificationCode) {
                // Verify and store user
                let users = JSON.parse(localStorage.getItem('users')) || [];
                users.push(user);
                localStorage.setItem('users', JSON.stringify(users));

                // Clear pending
                localStorage.removeItem('pendingUser');
                localStorage.removeItem('verificationCode');

                alert('Signup successful! Please login.');
                window.location.href = 'login.html';
            } else {
                alert('Invalid verification code. Signup failed.');
            }
        });
    </script>
</body>
</html>
